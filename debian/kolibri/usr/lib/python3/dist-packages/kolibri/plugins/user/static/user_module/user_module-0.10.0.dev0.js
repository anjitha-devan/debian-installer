!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/static/user_module/",n(n.s=33)}([function(t,e,n){"use strict";e.a=function(t,e,n,i,r,s,o,a){var u=typeof(t=t||{}).default;"object"!==u&&"function"!==u||(t=t.default);var c,l="function"==typeof t?t.options:t;e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0);i&&(l.functional=!0);s&&(l._scopeId=s);o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r);if(c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:l}}},function(t,e){t.exports=kolibriGlobal.coreVue.vuex.getters},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={ROOT:"ROOT",SIGN_IN:"SIGN_IN",SIGN_UP:"SIGN_UP",PROFILE:"PROFILE"}},function(t,e){t.exports=kolibriGlobal.coreVue.vuex.actions},function(t,e){t.exports=kolibriGlobal.coreVue.components.kButton},function(t,e){t.exports=kolibriGlobal.coreVue.vuex.constants},function(t,e){t.exports=kolibriGlobal.coreVue.components.kTextbox},function(t,e,n){"use strict";e.b=f,e.a=p,e.h=function(t,e){var n=e.edits,i=e.session,s=o.FacilityUserResource.getModel(i.user_id),a={};n.full_name&&n.full_name!==i.full_name&&(a.full_name=n.full_name);n.username&&n.username!==i.username&&(a.username=n.username);if(0===Object.keys(a).length)return Promise.resolve();return t.dispatch("SET_PROFILE_BUSY",!0),s.save(a).then(function(){r.getCurrentSession(t,!0),t.dispatch("SET_PROFILE_SUCCESS",!0),t.dispatch("SET_PROFILE_BUSY",!1),t.dispatch("SET_PROFILE_ERROR",{isError:!1})},function(e){var n=e.status,i=e.entity,r="";400===n.code?r=Object.values(i)[0][0]:403===n.code&&(r=i[0]),t.dispatch("SET_PROFILE_SUCCESS",!1),t.dispatch("SET_PROFILE_BUSY",!1),t.dispatch("SET_PROFILE_ERROR",{isError:!0,errorMessage:r,errorCode:n.code})})},e.i=function(t,e){var n=t.state.core.session,i=o.FacilityUserResource.getModel(n.user_id);return t.dispatch("SET_PROFILE_BUSY",!0),i.save({password:e}).then(function(){t.dispatch("SET_PROFILE_BUSY",!1),t.dispatch("SET_PROFILE_PASSWORD_MODAL",!1),r.createSnackbar(t,{text:Object(a.createTranslator)("updatePassword",{passwordChangeSuccessMessage:"Password changed"}).$tr("passwordChangeSuccessMessage"),autoDismiss:!0})},function(){t.dispatch("SET_PROFILE_BUSY",!1),t.dispatch("SET_PROFILE_PASSWORD_ERROR",!0)})},e.d=function(t){h(t,{pageName:l.a.PROFILE,title:d.$tr("userProfilePageTitle")}),p(t)},e.c=m,e.e=function(t){var e=Object(a.createTranslator)("signedOutSnackbar",{signedOut:"You were automatically signed out due to inactivity",dismiss:"Dismiss"});c.a.get(i.SIGNED_OUT_DUE_TO_INACTIVITY)&&(r.createSnackbar(t,{text:e.$tr("signedOut"),actionText:e.$tr("dismiss"),actionCallback:function(){return r.clearSnackbar(t)}}),c.a.set(i.SIGNED_OUT_DUE_TO_INACTIVITY,null));m(t).then(function(){t.dispatch("SET_FACILITY_ID",Object(s.currentFacilityId)(t.state)),t.dispatch("SET_PAGE_STATE",{hasMultipleFacilities:Object(s.facilities)(t.state).length>1}),h(t,{pageName:l.a.SIGN_IN,title:d.$tr("userSignInPageTitle")})})},e.f=function(t){return o.FacilityResource.getCollection().fetch().then(function(e){t.dispatch("CORE_SET_FACILITIES",e),h(t,{pageName:l.a.SIGN_UP,title:d.$tr("userSignUpPageTitle")}),f(t)}).catch(function(e){return r.handleApiError(t,e)})},e.g=function(t,e){return t.dispatch("SET_SIGN_UP_BUSY",!0),f(t),o.SignUpResource.createModel(e).save(e).then(function(){t.dispatch("SET_SIGN_UP_ERROR",{errorCode:null}),window.location="/"}).catch(function(e){var n=e.status,i=e.entity,r="";400!==n.code&&200!==n.code||(r=i[0]),t.dispatch("SET_SIGN_UP_ERROR",{errorCode:n.code,errorMessage:r}),t.dispatch("SET_SIGN_UP_BUSY",!1)})};var i=n(5),r=(n.n(i),n(3)),s=(n.n(r),n(1)),o=(n.n(s),n(13)),a=(n.n(o),n(85)),u=(n.n(a),n(86)),c=n.n(u),l=n(2),d=Object(a.createTranslator)("userPageTitles",{userProfilePageTitle:"User Profile",userSignInPageTitle:"User Sign In",userSignUpPageTitle:"User Sign Up"});function f(t){t.dispatch("RESET_SIGN_UP_STATE")}function p(t){t.dispatch("RESET_PROFILE_STATE")}function h(t,e){var n=e.pageName,i=e.title;t.dispatch("SET_PAGE_NAME",n),t.dispatch("CORE_SET_PAGE_LOADING",!1),t.dispatch("CORE_SET_ERROR",null),t.dispatch("CORE_SET_TITLE",i)}function m(t){return r.getFacilities(t).then(function(){return r.getFacilityConfig(t)})}},function(t,e){t.exports=kolibriGlobal.coreVue.components.uiAlert},function(t,e){t.exports=kolibriGlobal.coreVue.vuex.store},function(t,e){t.exports=kolibriGlobal.coreVue.router},function(t,e,n){"use strict";var i=n(5),r=(n.n(i),n(36)),s=n.n(r),o=n(2),a=n(37),u=n(52),c=n(88),l={};l[o.a.SIGN_IN]=a.a,l[o.a.SIGN_UP]=u.a,l[o.a.PROFILE]=c.a,e.a={name:"userPlugin",components:{coreBase:s.a,signInPage:a.a,signUpPage:u.a,profilePage:c.a},computed:{appBarTitle:function(){return this.pageName===o.a.PROFILE?this.$tr("userProfileTitle"):""},topLevelPageName:function(){return i.TopLevelPageNames.USER},currentPage:function(){return l[this.pageName]||null},navBarNeeded:function(){return this.pageName!==o.a.SIGN_IN&&this.pageName!==o.a.SIGN_UP}},vuex:{getters:{pageName:function(t){return t.pageName}}},$trs:{userProfileTitle:"Profile"}}},function(t,e,n){"use strict";var i=n(3),r=(n.n(i),n(1)),s=(n.n(r),n(13)),o=(n.n(s),n(5)),a=(n.n(o),n(4)),u=n.n(a),c=n(39),l=n.n(c),d=n(40),f=n.n(d),p=n(6),h=n.n(p),m=n(14),g=n.n(m),v=n(41),b=n(8),w=n.n(b),y=n(2),_=n(16),I=n(47);e.a={name:"signInPage",$trs:{kolibri:"Kolibri",signIn:"Sign in",username:"Username",password:"Password",enterPassword:"Enter password",noAccount:"Don't have an account?",createAccount:"Create account",accessAsGuest:"Access as guest",signInError:"Incorrect username or password",poweredBy:"Kolibri {version}",required:"This field is required",requiredForCoachesAdmins:"Password is required for coaches and admins"},components:{kButton:u.a,kRouterLink:l.a,kExternalLink:f.a,kTextbox:h.a,facilityModal:I.a,logo:g.a,uiAutocompleteSuggestion:v.a,uiAlert:w.a,languageSwitcherFooter:_.a},data:function(){return{username:"",password:"",usernameSuggestions:[],facilityModalVisible:this.hasMultipleFacilities,suggestionTerm:"",showDropdown:!0,highlightedIndex:-1,usernameBlurred:!1,passwordBlurred:!1,formSubmitted:!1,autoFilledByChromeAndNotEdited:!1}},computed:{simpleSignIn:function(){return this.facilityConfig.learnerCanLoginWithNoPassword},suggestions:function(){var t=this;return this.usernameSuggestions.filter(function(e){return e.toLowerCase().startsWith(t.username.toLowerCase())})},usernameIsInvalidText:function(){return(this.usernameBlurred||this.formSubmitted)&&""===this.username?this.$tr("required"):""},usernameIsInvalid:function(){return Boolean(this.usernameIsInvalidText)},passwordIsInvalidText:function(){if(this.passwordBlurred||this.formSubmitted){if(this.simpleSignIn&&""===this.password)return this.$tr("requiredForCoachesAdmins");if(""===this.password)return this.$tr("required")}return""},passwordIsInvalid:function(){return!this.autoFilledByChromeAndNotEdited&&Boolean(this.passwordIsInvalidText)},formIsValid:function(){return this.simpleSignIn?!this.usernameIsInvalid:!this.usernameIsInvalid&&!this.passwordIsInvalid},canSignUp:function(){return this.facilityConfig.learnerCanSignUp},signUpPage:function(){return{name:y.a.SIGN_UP}},versionMsg:function(){return this.$tr("poweredBy",{version:"0.10.0.dev0"})},hasServerError:function(){return Boolean(this.passwordMissing||this.invalidCredentials)},needPasswordField:function(){var t=this.simpleSignIn&&this.hasServerError;return!this.simpleSignIn||t}},watch:{username:"setSuggestionTerm"},mounted:function(){var t=this;setTimeout(function(){"rgb(250, 255, 189)"===window.getComputedStyle(t.$refs.username.$el.querySelector("input")).backgroundColor&&(t.autoFilledByChromeAndNotEdited=!0)},250)},methods:{closeFacilityModal:function(){this.facilityModalVisible=!1},setSuggestionTerm:function(t){null!==t&&void 0!==t&&(t.length<3?(this.suggestionTerm="",this.usernameSuggestions=[]):(!t.startsWith(this.suggestionTerm)&&this.suggestionTerm.length||!this.suggestionTerm.length)&&(this.suggestionTerm=t,this.setSuggestions()))},setSuggestions:function(){var t=this;s.FacilityUsernameResource.getCollection({facility:this.facility,search:this.suggestionTerm}).fetch().then(function(e){t.usernameSuggestions=e.map(function(t){return t.username}),t.showDropdown=!0}).catch(function(){t.usernameSuggestions=[]})},handleKeyboardNav:function(t){switch(t.code){case"ArrowDown":this.showDropdown&&this.suggestions.length&&(this.highlightedIndex=Math.min(this.highlightedIndex+1,this.suggestions.length-1));break;case"ArrowUp":this.showDropdown&&this.suggestions.length&&(this.highlightedIndex=Math.max(this.highlightedIndex-1,-1));break;case"Escape":this.showDropdown=!1;break;case"Enter":this.highlightedIndex<0?this.showDropdown=!1:(this.fillUsername(this.suggestions[this.highlightedIndex]),t.preventDefault());break;default:this.showDropdown=!0}},fillUsername:function(t){null!==t&&void 0!==t&&(this.username=t,this.showDropdown=!1,this.highlightedIndex=-1,this.$refs.username.focus())},handleUsernameBlur:function(){this.usernameBlurred=!0,this.showDropdown=!1},signIn:function(){this.formSubmitted=!0,this.formIsValid?this.kolibriLogin({username:this.username,password:this.password,facility:this.facilityId}).catch():this.focusOnInvalidField()},focusOnInvalidField:function(){this.usernameIsInvalid?this.$refs.username.focus():this.passwordIsInvalid&&this.$refs.password.focus()},handlePasswordChanged:function(){this.autoFilledByChromeAndNotEdited=!1}},vuex:{getters:{facilityId:function(t){return t.facilityId},facilityConfig:r.facilityConfig,hasMultipleFacilities:function(t){return t.pageState.hasMultipleFacilities},passwordMissing:function(t){return t.core.loginError===o.LoginErrors.PASSWORD_MISSING},invalidCredentials:function(t){return t.core.loginError===o.LoginErrors.INVALID_CREDENTIALS},busy:function(t){return t.core.signInBusy}},actions:{kolibriLogin:i.kolibriLogin}}}},function(t,e){t.exports=kolibriGlobal.resources},function(t,e){t.exports=kolibriGlobal.coreVue.components.logo},function(t,e,n){"use strict";e.a={name:"ui-autocomplete-suggestion",props:{suggestion:{type:[String,Object],required:!0},type:{type:String,default:"simple"},highlighted:{type:Boolean,default:!1},keys:{type:Object,default:function(){return{label:"label",image:"image"}}}},computed:{classes:function(){return["ui-autocomplete-suggestion--type-"+this.type,{"is-highlighted":this.highlighted}]},imageStyle:function(){return{"background-image":"url("+this.suggestion[this.keys.image]+")"}}}}},function(t,e,n){"use strict";var i=n(17),r=n(46),s=n(0);var o=function(t){n(44)},a=Object(s.a)(i.a,r.a,r.b,!1,o,"data-v-29aa5014",null);e.a=a.exports},function(t,e,n){"use strict";var i=n(45),r=n.n(i);e.a={name:"languageSwitcherFooter",components:{languageSwitcherList:r.a}}},function(t,e,n){"use strict";var i=n(19),r=n.n(i),s=n(49),o=n.n(s),a=n(4),u=n.n(a),c=n(3),l=(n.n(c),n(1));n.n(l);e.a={name:"facilityModal",components:{coreModal:r.a,kRadioButton:o.a,kButton:u.a},data:function(){return{selectedFacility:this.currentFacilityId}},methods:{emitClose:function(){this.$emit("close")},submitAndClose:function(){this.setFacilityId(),this.clearLoginError(),this.getFacilityConfig(this.selectedFacility).then(this.emitClose)}},$trs:{facilitySelectionPrompt:"Which facility do you want to sign in to?",submitFacilitySelectionButtonPrompt:"Select",facilitySelectionModalHeader:"Select a facility"},vuex:{getters:{currentFacilityId:function(t){return t.facilityId},facilities:l.facilities},actions:{getFacilityConfig:c.getFacilityConfig,setFacilityId:function(t){t.dispatch("SET_FACILITY_ID",this.selectedFacility)},clearLoginError:function(t){t.dispatch("CORE_SET_LOGIN_ERROR","")}}}}},function(t,e){t.exports=kolibriGlobal.coreVue.components.coreModal},function(t,e,n){"use strict";var i=n(21),r=(n.n(i),n(4)),s=n.n(r),o=n(8),a=n.n(o),u=n(6),c=n.n(u),l=n(54),d=n(14),f=n.n(d),p=n(84),h=n.n(p),m=n(2),g=n(7),v=n(16);e.a={name:"signUpPage",$trs:{createAccount:"Create an account",name:"Full name",username:"Username",password:"Password",reEnterPassword:"Re-enter password",passwordMatchError:"Passwords do not match",genericError:"Something went wrong during sign up",usernameAlphaNumError:"Username can only contain letters, numbers, and underscores",usernameAlreadyExistsError:"An account with that username already exists",logIn:"Sign in",kolibri:"Kolibri",finish:"Finish",facility:"Facility",required:"This field is required"},components:{kButton:s.a,uiAlert:a.a,kTextbox:c.a,uiToolbar:l.a,logo:f.a,kSelect:h.a,languageSwitcherFooter:v.a},data:function(){return{name:"",username:"",password:"",confirmedPassword:"",selectedFacility:{},nameBlurred:!1,usernameBlurred:!1,passwordBlurred:!1,confirmedPasswordBlurred:!1,facilityBlurred:!1,formSubmitted:!1}},computed:{signInPage:function(){return{name:m.a.SIGN_IN}},facilityList:function(){return this.facilities.map(function(t){return{label:t.name,value:t.id}})},nameIsInvalidText:function(){return(this.nameBlurred||this.formSubmitted)&&""===this.name?this.$tr("required"):""},nameIsInvalid:function(){return Boolean(this.nameIsInvalidText)},usernameDoesNotExistYet:function(){return 400!==this.errorCode},usernameIsInvalidText:function(){if(this.usernameBlurred||this.formSubmitted){if(""===this.username)return this.$tr("required");if(!Object(i.validateUsername)(this.username))return this.$tr("usernameAlphaNumError");if(!this.usernameDoesNotExistYet)return this.$tr("usernameAlreadyExistsError")}return""},usernameIsInvalid:function(){return Boolean(this.usernameIsInvalidText)},passwordIsInvalidText:function(){return(this.passwordBlurred||this.formSubmitted)&&""===this.password?this.$tr("required"):""},passwordIsInvalid:function(){return Boolean(this.passwordIsInvalidText)},confirmedPasswordIsInvalidText:function(){if(this.confirmedPasswordBlurred||this.formSubmitted){if(""===this.confirmedPassword)return this.$tr("required");if(this.confirmedPassword!==this.password)return this.$tr("passwordMatchError")}return""},confirmedPasswordIsInvalid:function(){return Boolean(this.confirmedPasswordIsInvalidText)},noFacilitySelected:function(){return!this.selectedFacility.value},facilityIsInvalidText:function(){return(this.facilityBlurred||this.formSubmitted)&&this.noFacilitySelected?this.$tr("required"):""},facilityIsInvalid:function(){return Boolean(this.facilityIsInvalidText)},formIsValid:function(){return!(this.nameIsInvalid||this.usernameIsInvalid||this.passwordIsInvalid||this.confirmedPasswordIsInvalid||this.facilityIsInvalid)},unknownError:function(){return!!this.errorCode&&400!==this.errorCode},errorMessage:function(){return this.backendErrorMessage||this.$tr("genericError")}},beforeMount:function(){1===this.facilityList.length&&(this.selectedFacility=this.facilityList[0])},methods:{signUp:function(){this.formSubmitted=!0,this.formIsValid&&!this.busy?this.signUpNewUser({facility:this.selectedFacility.value,full_name:this.name,username:this.username,password:this.password}):this.focusOnInvalidField()},focusOnInvalidField:function(){this.nameIsInvalid?this.$refs.name.focus():this.usernameIsInvalid?this.$refs.username.focus():this.passwordIsInvalid?this.$refs.password.focus():this.confirmedPasswordIsInvalid&&this.$refs.confirmedPassword.focus()}},vuex:{getters:{session:function(t){return t.core.session},errorCode:function(t){return t.pageState.errorCode},busy:function(t){return t.pageState.busy},backendErrorMessage:function(t){return t.pageState.errorMessage},facilities:function(t){return t.core.facilities}},actions:{signUpNewUser:g.g,resetSignUpState:g.b}}}},function(t,e){t.exports=kolibriGlobal.utils.validators},function(t,e,n){"use strict";var i=n(56),r=n(80);e.a={name:"ui-toolbar",props:{type:{type:String,default:"default"},textColor:{type:String,default:"black"},title:String,brand:String,removeBrandDivider:{type:Boolean,default:!1},navIcon:{type:String,default:"menu"},removeNavIcon:{type:Boolean,default:!1},raised:{type:Boolean,default:!0},progressPosition:{type:String,default:"bottom"},loading:{type:Boolean,default:!1}},computed:{classes:function(){return["ui-toolbar--type-"+this.type,"ui-toolbar--text-color-"+this.textColor,"ui-toolbar--progress-position-"+this.progressPosition,{"is-raised":this.raised}]},progressColor:function(){return"black"===this.textColor?"primary":"white"},hasBrandDivider:function(){return!this.removeBrandDivider&&(this.brand||this.$slots.brand)}},methods:{navIconClick:function(){this.$emit("nav-icon-click")}},components:{UiIconButton:i.a,UiProgressLinear:r.a}}},function(t,e,n){"use strict";var i=n(58),r=n(61),s=n(65),o=n(68),a=n(71),u=n(76);e.a={name:"ui-icon-button",props:{type:{type:String,default:"primary"},buttonType:{type:String,default:"button"},color:{type:String,default:"default"},size:{type:String,default:"normal"},icon:String,ariaLabel:String,loading:{type:Boolean,default:!1},hasDropdown:{type:Boolean,default:!1},dropdownPosition:{type:String,default:"bottom left"},openDropdownOn:{type:String,default:"click"},tooltip:String,openTooltipOn:String,tooltipPosition:String,disableRipple:{type:Boolean,default:u.a.data.disableRipple},disabled:{type:Boolean,default:!1}},computed:{classes:function(){return["ui-icon-button--type-"+this.type,"ui-icon-button--color-"+this.color,"ui-icon-button--size-"+this.size,{"is-loading":this.loading},{"is-disabled":this.disabled||this.loading},{"has-dropdown":this.hasDropdown}]},progressColor:function(){return"primary"===this.type?"default"===this.color||"black"===this.color?"black":"white":"white"===this.color?"white":"black"}},methods:{onClick:function(t){this.$emit("click",t)},onDropdownOpen:function(){this.$emit("dropdown-open")},onDropdownClose:function(){this.$emit("dropdown-close")},openDropdown:function(){this.$refs.dropdown&&this.$refs.dropdown.open()},closeDropdown:function(){this.$refs.dropdown&&this.$refs.dropdown.close()},toggleDropdown:function(){this.$refs.dropdown&&this.$refs.dropdown.toggle()}},components:{UiIcon:i.a,UiPopover:r.a,UiProgressCircular:s.a,UiRippleInk:o.a,UiTooltip:a.a}}},function(t,e,n){"use strict";e.a={name:"ui-icon",props:{icon:String,iconSet:{type:String,default:"material-icons"},ariaLabel:String,removeText:{type:Boolean,default:!1},useSvg:{type:Boolean,default:!1},mirror:{type:Boolean,default:!1}}}},function(t,e,n){"use strict";var i=n(26),r=n(63),s=n.n(r);e.a={name:"ui-popover",props:{trigger:{type:String,required:!0},dropdownPosition:{type:String,default:"bottom left"},openOn:{type:String,default:"click"},containFocus:{type:Boolean,default:!1},focusRedirector:Function,raised:{type:Boolean,default:!0}},data:function(){return{dropInstance:null,lastfocusedElement:null}},computed:{triggerEl:function(){return this.$parent.$refs[this.trigger]}},mounted:function(){this.triggerEl&&this.initializeDropdown()},beforeDestroy:function(){this.dropInstance&&this.dropInstance.destroy()},methods:{initializeDropdown:function(){this.dropInstance=new s.a({target:this.triggerEl,content:this.$el,position:this.dropdownPosition,constrainToWindow:!0,openOn:this.openOn}),"bottom left"!==this.dropdownPosition&&(this.dropInstance.open(),this.dropInstance.close(),this.dropInstance.open(),this.dropInstance.close()),this.dropInstance.on("open",this.onOpen),this.dropInstance.on("close",this.onClose)},openDropdown:function(){this.dropInstance&&this.dropInstance.open()},closeDropdown:function(){this.dropInstance&&this.dropInstance.close()},toggleDropdown:function(t){this.dropInstance&&this.dropInstance.toggle(t)},positionDrop:function(){var t=this.dropInstance,e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=t.drop.getBoundingClientRect().width,i=e-t.target.getBoundingClientRect().left;if(n>i){var r=n>i?"right":"left";t.tether.attachment.left=r,t.tether.targetAttachment.left=r,t.position()}},onOpen:function(){this.positionDrop(),i.a.add(this.triggerEl,"has-dropdown-open"),this.lastfocusedElement=document.activeElement,this.$el.focus(),this.$emit("open")},onClose:function(){i.a.remove(this.triggerEl,"has-dropdown-open"),this.lastfocusedElement&&this.lastfocusedElement.focus(),this.$emit("close")},restrictFocus:function(t){this.containFocus?(t.stopPropagation(),this.focusRedirector?this.focusRedirector(t):this.$el.focus()):this.closeDropdown()},open:function(){this.openDropdown()},close:function(){this.closeDropdown()},toggle:function(){this.toggleDropdown()}}}},function(t,e,n){"use strict";var i=/^\s+|\s+$/g,r=/\s+/g;function s(t){return"string"==typeof t?t.replace(i,"").split(r):t}function o(t){return l(t)?(t.getAttribute("class")||"").replace(i,"").split(r):[]}function a(t,e){l(t)&&t.setAttribute("class",s(e).join(" "))}function u(t,e){var n=o(t);return s(e).forEach(function(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}),a(t,n),n}function c(t,e){var n=o(t);return s(e).every(function(t){return-1!==n.indexOf(t)})}function l(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:function(t){return t&&"object"==typeof t&&"string"==typeof t.nodeName&&1===t.nodeType}(t)}e.a={add:function(t,e){var n=u(t,e),i=s(e);return n.push.apply(n,i),a(t,n),n},remove:u,contains:c,has:c,set:a,get:o}},function(t,e,n){"use strict";e.a={name:"ui-progress-circular",props:{type:{type:String,default:"indeterminate"},color:{type:String,default:"primary"},progress:{type:Number,default:0},size:{type:Number,default:32},stroke:Number,autoStroke:{type:Boolean,default:!0},disableTransition:{type:Boolean,default:!1}},computed:{classes:function(){return["ui-progress-circular--color-"+this.color,"ui-progress-circular--type-"+this.type]},strokeDashArray:function(){var t=2*Math.PI*this.radius;return Math.round(1e3*t)/1e3},strokeDashOffset:function(){return(100-this.moderateProgress(this.progress))/100*(2*Math.PI*this.radius)},radius:function(){var t=this.stroke?this.stroke:4;return(this.size-t)/2},calculatedStroke:function(){return this.stroke?this.stroke:this.autoStroke?parseInt(this.size/8,10):4}},methods:{moderateProgress:function(t){return isNaN(t)||t<0?0:t>100?100:t}}}},function(t,e,n){"use strict";var i=n(26),r=function(t,e){var n=e.currentTarget||e.target;if(n&&!i.a.has(n,"ui-ripple-ink")&&(n=n.querySelector(".ui-ripple-ink")),n){var r=n.getAttribute("data-ui-event");if(!r||r===t){n.setAttribute("data-ui-event",t);var s,o=n.getBoundingClientRect(),a=e.offsetX;void 0===a?(a=e.clientX-o.left,s=e.clientY-o.top):s=e.offsetY;var u,c=document.createElement("div"),l=2*(u=o.width===o.height?1.412*o.width:Math.sqrt(o.width*o.width+o.height*o.height))+"px";c.style.width=l,c.style.height=l,c.style.marginLeft=-u+a+"px",c.style.marginTop=-u+s+"px",c.className="ui-ripple-ink__ink",n.appendChild(c),setTimeout(function(){i.a.add(c,"is-held")},0);var d="mousedown"===t?"mouseup":"touchend",f=function(){document.removeEventListener(d,f),i.a.add(c,"is-done"),setTimeout(function(){n.removeChild(c),0===n.children.length&&n.removeAttribute("data-ui-event")},650)};document.addEventListener(d,f)}}},s=function(t){0===t.button&&r(t.type,t)},o=function(t){if(t.changedTouches)for(var e=0;e<t.changedTouches.length;++e)r(t.type,t.changedTouches[e])};e.a={name:"ui-ripple-ink",props:{trigger:{type:String,required:!0}},watch:{trigger:function(){this.initialize()}},mounted:function(){var t=this;this.$nextTick(function(){t.initialize()})},beforeDestroy:function(){var t=this.trigger?this.$parent.$refs[this.trigger]:null;t&&(t.removeEventListener("mousedown",s),t.removeEventListener("touchstart",o))},methods:{initialize:function(){var t=this.trigger?this.$parent.$refs[this.trigger]:null;t&&(t.addEventListener("touchstart",o),t.addEventListener("mousedown",s))}}}},function(t,e,n){"use strict";var i=n(73),r=n.n(i),s=n(74);e.a={name:"ui-tooltip",props:{trigger:{type:String,required:!0},position:{type:String,default:"bottom center"},openOn:{type:String,default:"hover focus"},openDelay:{type:Number,default:0}},data:function(){return{tooltip:null,id:s.a.short("ui-tooltip-")}},watch:{trigger:function(){null===this.tooltip&&this.initialize()}},mounted:function(){null===this.tooltip&&this.initialize()},beforeDestroy:function(){null!==this.tooltip&&this.tooltip.destroy()},methods:{initialize:function(){if(void 0!==this.trigger&&this.$parent.$refs[this.trigger]){var t=this.$parent.$refs[this.trigger]._isVue?this.$parent.$refs[this.trigger].$el:this.$parent.$refs[this.trigger];this.tooltip=new r.a({target:t,content:this.$refs.tooltip,classes:"ui-tooltip--theme-default",position:this.position,openOn:this.openOn,openDelay:this.openDelay}),t.setAttribute("aria-describedby",this.id)}}}}},function(t,e,n){"use strict";e.a={name:"ui-progress-linear",props:{type:{type:String,default:"indeterminate"},color:{type:String,default:"primary"},progress:{type:Number,default:0}},computed:{classes:function(){return["ui-progress-linear--color-"+this.color,"ui-progress-linear--type-"+this.type]},moderatedProgress:function(){return this.progress<0?0:this.progress>100?100:this.progress}}}},function(t,e,n){"use strict";var i=n(1),r=(n.n(i),n(90)),s=n.n(r),o=n(21),a=(n.n(o),n(3)),u=(n.n(a),n(4)),c=n.n(u),l=n(6),d=n.n(l),f=n(91),p=n.n(f),h=n(92),m=n.n(h),g=n(8),v=n.n(g),b=n(5),w=(n.n(b),n(7)),y=n(93);e.a={name:"profilePage",$trs:{genericError:"Something went wrong",success:"Profile details updated",username:"Username",name:"Full name",updateProfile:"Save changes",isLearner:"Learner",isCoach:"Coach",isAdmin:"Admin",isSuperuser:"Superuser permissions ",manageContent:"Manage content",points:"Points",role:"Role",devicePermissions:"Device permissions",usernameNotAlphaNumUnderscore:"Username can only contain letters, numbers, and underscores",required:"This field is required",limitedPermissions:"Limited permissions",youCan:"You can",changePasswordPrompt:"Change password",usernameAlreadyExists:"An account with that username already exists"},components:{kButton:c.a,kTextbox:d.a,uiAlert:v.a,pointsIcon:p.a,permissionsIcon:m.a,changeUserPasswordModal:y.a},mixins:[s.a],data:function(){return{username:this.session.username,name:this.session.full_name,usernameBlurred:!1,nameBlurred:!1,formSubmitted:!1}},computed:{role:function(){return this.getUserKind===b.UserKinds.ADMIN?this.$tr("isAdmin"):this.getUserKind===b.UserKinds.COACH?this.$tr("isCoach"):this.getUserKind===b.UserKinds.LEARNER?this.$tr("isLearner"):""},permissionType:function(){return this.isSuperuser?b.PermissionTypes.SUPERUSER:this.userHasPermissions?b.PermissionTypes.LIMITED_PERMISSIONS:null},permissionTypeText:function(){return this.isSuperuser?this.$tr("isSuperuser"):this.userHasPermissions?this.$tr("limitedPermissions"):""},canEditUsername:function(){return!this.isCoach&&!this.isLearner||this.facilityConfig.learnerCanEditUsername},canEditName:function(){return!this.isCoach&&!this.isLearner||this.facilityConfig.learnerCanEditName},canEditPassword:function(){return this.isSuperuser||this.facilityConfig.learnerCanEditPassword},nameIsInvalidText:function(){return(this.nameBlurred||this.formSubmitted)&&""===this.name?this.$tr("required"):""},nameIsInvalid:function(){return Boolean(this.nameIsInvalidText)},usernameIsInvalidText:function(){if(this.usernameBlurred||this.formSubmitted){if(""===this.username)return this.$tr("required");if(!Object(o.validateUsername)(this.username))return this.$tr("usernameNotAlphaNumUnderscore");if(this.usernameAlreadyExists)return this.$tr("usernameAlreadyExists")}return""},usernameIsInvalid:function(){return Boolean(this.usernameIsInvalidText)},usernameAlreadyExists:function(){return 400===this.errorCode},unknownError:function(){return!!this.errorCode&&400!==this.errorCode},errorMessage:function(){return this.backendErrorMessage||this.$tr("genericError")},formIsValid:function(){return!this.usernameIsInvalid}},created:function(){this.fetchPoints()},methods:{submitEdits:function(){this.formSubmitted=!0,this.resetProfileState(),this.formIsValid?this.updateUserProfile({edits:{username:this.username,full_name:this.name},session:this.session}):this.nameIsInvalid?this.$refs.name.focus():this.usernameIsInvalid&&this.$refs.username.focus()},getPermissionString:function(t){return"can_manage_content"===t?this.$tr("manageContent"):t}},vuex:{getters:{facilityConfig:i.facilityConfig,isSuperuser:i.isSuperuser,isAdmin:i.isAdmin,isCoach:i.isCoach,isLearner:i.isLearner,totalPoints:i.totalPoints,session:function(t){return t.core.session},busy:function(t){return t.pageState.busy},errorCode:function(t){return t.pageState.errorCode},backendErrorMessage:function(t){return t.pageState.errorMessage},success:function(t){return t.pageState.success},passwordModalVisible:function(t){return t.pageState.passwordState.modal},getUserKind:i.getUserKind,getUserPermissions:i.getUserPermissions,userHasPermissions:i.userHasPermissions},actions:{updateUserProfile:w.h,resetProfileState:w.a,fetchPoints:a.fetchPoints,setPasswordModalVisible:function(t,e){t.dispatch("SET_PROFILE_PASSWORD_MODAL",e)}}}}},function(t,e,n){"use strict";var i=n(19),r=n.n(i),s=n(6),o=n.n(s),a=n(4),u=n.n(a),c=n(7);e.a={name:"changeUserPasswordModal",components:{coreModal:r.a,kTextbox:o.a,kButton:u.a},data:function(){return{newPassword:"",confirmedNewPassword:"",newPasswordBlurred:!1,confirmedNewPasswordBlurred:!1,submittedForm:!1}},computed:{newPasswordInvalidErrorText:function(){return(this.newPasswordBlurred||this.submittedForm)&&""===this.newPassword?this.$tr("required"):""},newPasswordIsInvalid:function(){return!!this.newPasswordInvalidErrorText},confirmedNewPasswordInvalidErrorText:function(){if(this.confirmedNewPasswordBlurred||this.submittedForm){if(""===this.confirmedNewPassword)return this.$tr("required");if(this.confirmedNewPassword!==this.newPassword)return this.$tr("passwordMismatchErrorMessage")}return""},confirmedNewPasswordIsInvalid:function(){return!!this.confirmedNewPasswordInvalidErrorText},formIsValid:function(){return!this.newPasswordIsInvalid&&!this.confirmedNewPasswordIsInvalid}},methods:{closeModal:function(){this.$emit("cancel")},submitForm:function(){this.submittedForm=!0,this.formIsValid?this.updateUserProfilePassword(this.newPassword):this.newPasswordIsInvalid?this.$refs.newPassword.focus():this.confirmedNewPasswordIsInvalid&&this.$refs.confirmedNewPassword.focus()}},vuex:{actions:{updateUserProfilePassword:c.i},getters:{isBusy:function(t){return t.pageState.busy}}},$trs:{passwordChangeFormHeader:"Change Password",newPasswordFieldLabel:"Enter new password",confirmNewPasswordFieldLabel:"Re-enter new password",passwordMismatchErrorMessage:"New passwords do not match",required:"This field is required",cancelButtonLabel:"cancel",updateButtonLabel:"update"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n.n(i),s=n(1),o=(n.n(s),n(10)),a=n.n(o),u=n(34),c=n(7),l=n(98),d=n(99),f=n(2),p=n(100),h=[{name:f.a.ROOT,path:"/",handler:function(){Object(s.isUserLoggedIn)(r.a.state)?a.a.getInstance().replace({name:f.a.PROFILE}):a.a.getInstance().replace({name:f.a.SIGN_IN})}},{name:f.a.SIGN_IN,path:"/signin",handler:function(){Object(s.isUserLoggedIn)(r.a.state)?a.a.getInstance().replace({name:f.a.PROFILE}):Object(c.e)(r.a)}},{name:f.a.SIGN_UP,path:"/create_account",handler:function(){return Object(s.isUserLoggedIn)(r.a.state)?(a.a.getInstance().replace({name:f.a.PROFILE}),Promise.resolve()):Object(c.f)(r.a)}},{name:f.a.PROFILE,path:"/profile",handler:function(){Object(s.isUserLoggedIn)(r.a.state)?Object(c.d)(r.a):a.a.getInstance().replace({name:f.a.SIGN_IN})}},{path:"*",redirect:"/"}],m=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={stateSetters:{configurable:!0},routes:{configurable:!0},RootVue:{configurable:!0},initialState:{configurable:!0},mutations:{configurable:!0}};return n.stateSetters.get=function(){return[c.c]},n.routes.get=function(){return h},n.RootVue.get=function(){return u.a},n.initialState.get=function(){return l.a},n.mutations.get=function(){return d.a},Object.defineProperties(e.prototype,n),e}(p.a);e.default=new m},function(t,e,n){"use strict";var i=n(11),r=n(97),s=n(0);var o=function(t){n(35)},a=Object(s.a)(i.a,r.a,r.b,!1,o,"data-v-01d5544a",null);e.a=a.exports},function(t,e){},function(t,e){t.exports=kolibriGlobal.coreVue.components.coreBase},function(t,e,n){"use strict";var i=n(12),r=n(51),s=n(0);var o=function(t){n(38)},a=Object(s.a)(i.a,r.a,r.b,!1,o,"data-v-2f01a676",null);e.a=a.exports},function(t,e){},function(t,e){t.exports=kolibriGlobal.coreVue.components.kRouterLink},function(t,e){t.exports=kolibriGlobal.coreVue.components.kExternalLink},function(t,e,n){"use strict";var i=n(15),r=n(43),s=n(0);var o=function(t){n(42)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"ui-autocomplete-suggestion",class:t.classes},[t._t("default",["simple"===t.type?n("div",{staticClass:"ui-autocomplete-suggestion__simple"},[t._v("\n            "+t._s(t.suggestion[t.keys.label]||t.suggestion)+"\n        ")]):t._e(),"image"===t.type?n("div",{staticClass:"ui-autocomplete-suggestion__image"},[n("div",{staticClass:"ui-autocomplete-suggestion__image-object",style:t.imageStyle}),n("div",{staticClass:"ui-autocomplete-suggestion__image-text"},[t._v(t._s(t.suggestion[t.keys.label]))])]):t._e()])],2)},r=[]},function(t,e){},function(t,e){t.exports=kolibriGlobal.coreVue.components.languageSwitcherList},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer-wrapper"},[e("language-switcher-list",{staticClass:"list"})],1)},r=[]},function(t,e,n){"use strict";var i=n(18),r=n(50),s=n(0);var o=function(t){n(48)},a=Object(s.a)(i.a,r.a,r.b,!1,o,"data-v-3e5dab55",null);e.a=a.exports},function(t,e){},function(t,e){t.exports=kolibriGlobal.coreVue.components.kRadioButton},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("core-modal",{attrs:{title:t.$tr("facilitySelectionModalHeader")},on:{cancel:t.emitClose}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submitAndClose(e)}}},[t._v("\n    "+t._s(t.$tr("facilitySelectionPrompt"))+"\n\n    "),t._l(t.facilities,function(e){return n("k-radio-button",{key:e.id,attrs:{label:e.name,radiovalue:e.id},model:{value:t.selectedFacility,callback:function(e){t.selectedFacility=e},expression:"selectedFacility"}})}),n("div",{staticClass:"core-modal-buttons"},[n("k-button",{attrs:{text:t.$tr("submitFacilitySelectionButtonPrompt"),primary:!0,type:"submit"}})],1)],2)])},r=[]},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fh"},[t.facilityModalVisible?n("facility-modal",{on:{close:t.closeFacilityModal}}):t._e(),n("div",{staticClass:"wrapper-table"},[n("div",{staticClass:"main-row"},[n("div",{attrs:{id:"main-cell"}},[n("logo",{staticClass:"logo"}),n("h1",{staticClass:"login-text title"},[t._v(t._s(t.$tr("kolibri")))]),n("form",{ref:"form",staticClass:"login-form",on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[t.invalidCredentials?n("ui-alert",{staticClass:"alert",attrs:{type:"error",dismissible:!1}},[t._v("\n          "+t._s(t.$tr("signInError"))+"\n        ")]):t._e(),n("transition",{attrs:{name:"textbox"}},[n("k-textbox",{ref:"username",attrs:{id:"username",autocomplete:"username",autofocus:!t.hasMultipleFacilities,label:t.$tr("username"),invalid:t.usernameIsInvalid,invalidText:t.usernameIsInvalidText},on:{blur:t.handleUsernameBlur,input:function(e){t.showDropdown=!0},keydown:t.handleKeyboardNav},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("transition",{attrs:{name:"list"}},[t.simpleSignIn&&t.suggestions.length?n("ul",{directives:[{name:"show",rawName:"v-show",value:t.showDropdown,expression:"showDropdown"}],staticClass:"suggestions"},t._l(t.suggestions,function(e,i){return n("ui-autocomplete-suggestion",{key:i,class:{highlighted:t.highlightedIndex===i},attrs:{suggestion:e},nativeOn:{click:function(n){t.fillUsername(e)}}})})):t._e()]),n("transition",{attrs:{name:"textbox"}},[t.needPasswordField?n("k-textbox",{ref:"password",attrs:{id:"password",type:"password",autocomplete:"current-password",label:t.$tr("password"),autofocus:t.simpleSignIn,invalid:t.passwordIsInvalid,invalidText:t.passwordIsInvalidText,floatingLabel:!t.autoFilledByChromeAndNotEdited},on:{blur:function(e){t.passwordBlurred=!0},input:t.handlePasswordChanged},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}):t._e()],1),n("k-button",{staticClass:"login-btn",attrs:{type:"submit",text:t.$tr("signIn"),primary:!0,disabled:t.busy}})],1),n("div",{staticClass:"divider"}),n("p",{staticClass:"login-text no-account"},[t._v(t._s(t.$tr("noAccount")))]),n("div",[t.canSignUp?n("k-router-link",{attrs:{text:t.$tr("createAccount"),to:t.signUpPage,primary:!1,appearance:"raised-button"}}):t._e()],1),n("div",[n("k-external-link",{attrs:{text:t.$tr("accessAsGuest"),href:"/learn",primary:!1,appearance:"flat-button"}})],1),n("p",{staticClass:"login-text version"},[t._v(t._s(t.versionMsg))])],1)]),n("div",{staticClass:"footer-row"},[n("language-switcher-footer",{staticClass:"footer-cell"})],1)])],1)},r=[]},function(t,e,n){"use strict";var i=n(20),r=n(87),s=n(0);var o=function(t){n(53)},a=Object(s.a)(i.a,r.a,r.b,!1,o,"data-v-1611500b",null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";var i=n(22),r=n(83),s=n(0);var o=function(t){n(55)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";var i=n(23),r=n(79),s=n(0);var o=function(t){n(57)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";var i=n(24),r=n(60),s=n(0);var o=function(t){n(59)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ui-icon",class:[t.iconSet,t.icon,{"is-mirrored":t.mirror}],attrs:{"aria-label":t.ariaLabel}},[t.useSvg?n("svg",{staticClass:"ui-icon__svg"},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#"+t.icon}})]):t._t("default",[t._v(t._s(t.removeText?null:t.icon))])],2)},r=[]},function(t,e,n){"use strict";var i=n(25),r=n(64),s=n(0);var o=function(t){n(62)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e){t.exports=kolibriGlobal.lib.tetherDrop},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-popover",class:{"is-raised":t.raised},attrs:{role:"dialog",tabindex:"-1"},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,"Escape")?t.closeDropdown(e):null}}},[t._t("default"),n("div",{staticClass:"ui-popover__focus-redirector",attrs:{tabindex:"0"},on:{focus:t.restrictFocus}})],2)},r=[]},function(t,e,n){"use strict";var i=n(27),r=n(67),s=n(0);var o=function(t){n(66)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.disableTransition?null:"ui-progress-circular--transition-fade"}},[n("div",{staticClass:"ui-progress-circular",class:t.classes,style:{width:t.size+"px",height:t.size+"px"}},["determinate"===t.type?n("svg",{staticClass:"ui-progress-circular__determinate",attrs:{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":t.progress,height:t.size,width:t.size}},[n("circle",{staticClass:"ui-progress-circular__determinate-path",style:{"stroke-dashoffset":t.strokeDashOffset,"stroke-width":t.calculatedStroke},attrs:{fill:"transparent","stroke-dashoffset":"0",cx:t.size/2,cy:t.size/2,r:t.radius,"stroke-dasharray":t.strokeDashArray}})]):n("svg",{staticClass:"ui-progress-circular__indeterminate",attrs:{role:"progressbar",viewBox:"25 25 50 50","aria-valuemax":100,"aria-valuemin":0}},[n("circle",{staticClass:"ui-progress-circular__indeterminate-path",attrs:{cx:"50",cy:"50",fill:"none",r:"20","stroke-miterlimit":"10","stroke-width":t.calculatedStroke}})])])])},r=[]},function(t,e,n){"use strict";var i=n(28),r=n(70),s=n(0);var o=function(t){n(69)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"ui-ripple-ink"})},r=[]},function(t,e,n){"use strict";var i=n(29),r=n(75),s=n(0);var o=function(t){n(72)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e){t.exports=kolibriGlobal.lib.tetherTooltip},function(t,e,n){"use strict";
/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 */for(var i=[],r=0;r<256;r++)i[r]=(r<16?"0":"")+r.toString(16);var s=function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return i[255&t]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+"-"+i[255&e]+i[e>>8&255]+"-"+i[e>>16&15|64]+i[e>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]};e.a={generate:s,short:function(t){return(t=t||"")+s().split("-")[0]}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"tooltip",staticClass:"ui-tooltip",attrs:{role:"tooltip",id:this.id}},[this._t("default")],2)},r=[]},function(t,e,n){"use strict";var i=n(77),r=n.n(i),s={disableRipple:!1,UiAutocomplete:{keys:{label:"label",value:"value",image:"image"}},UiCheckboxGroup:{keys:{id:"id",name:"name",class:"class",label:"label",value:"value",disabled:"disabled"}},UiMenu:{keys:{icon:"icon",type:"type",label:"label",secondaryText:"secondaryText",iconProps:"iconProps",disabled:"disabled"}},UiRadioGroup:{keys:{id:"id",class:"class",label:"label",value:"value",checked:"checked",disabled:"disabled"}},UiSelect:{keys:{label:"label",value:"value",image:"image"}}},o=function(){this.data=r()(s,window.KeenUiConfig?window.KeenUiConfig:{})};o.prototype.set=function(t){void 0===t&&(t={}),this.data=r()(this.data,t)},e.a=new o},function(t,e,n){"use strict";var i=n(78),r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(t,e,n){var s=e[n];if(void 0!==s&&null!==s){if(r.call(t,n)&&(void 0===t[n]||null===t[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");r.call(t,n)&&i(s)?t[n]=a(Object(t[n]),e[n]):t[n]=s}}function a(t,e){if(t===e)return t;for(var n in e=Object(e))r.call(e,n)&&o(t,e,n);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)s.call(e,i[a])&&o(t,e,i[a]);return t}t.exports=function(t){t=function(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}(t);for(var e=1;e<arguments.length;e++)a(t,arguments[e]);return t}},function(t,e,n){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{ref:"button",staticClass:"ui-icon-button",class:t.classes,attrs:{"aria-label":t.ariaLabel||t.tooltip,disabled:t.disabled||t.loading,type:t.buttonType},on:{click:t.onClick}},[t.icon||t.$slots.default?n("div",{staticClass:"ui-icon-button__icon"},[t._t("default",[n("ui-icon",{attrs:{icon:t.icon}})])],2):t._e(),n("div",{staticClass:"ui-icon-button__focus-ring"}),n("ui-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"ui-icon-button__progress",attrs:{color:t.progressColor,size:"large"===t.size?24:18,stroke:4.5}}),t.disableRipple||t.disabled?t._e():n("ui-ripple-ink",{attrs:{trigger:"button"}}),t.hasDropdown?n("ui-popover",{ref:"dropdown",attrs:{trigger:"button","dropdown-position":t.dropdownPosition,"open-on":t.openDropdownOn},on:{close:t.onDropdownClose,open:t.onDropdownOpen}},[t._t("dropdown")],2):t._e(),t.tooltip?n("ui-tooltip",{attrs:{trigger:"button","open-on":t.openTooltipOn,position:t.tooltipPosition}},[t._v(t._s(t.tooltip))]):t._e()],1)},r=[]},function(t,e,n){"use strict";var i=n(30),r=n(82),s=n(0);var o=function(t){n(81)},a=Object(s.a)(i.a,r.a,r.b,!1,o,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"ui-progress-linear--transition-fade"}},[e("div",{staticClass:"ui-progress-linear",class:this.classes},["determinate"===this.type?e("div",{staticClass:"ui-progress-linear__progress-bar is-determinate",style:{transform:"scaleX("+this.moderatedProgress/100+")"},attrs:{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":this.moderatedProgress}}):e("div",{staticClass:"ui-progress-linear__progress-bar is-indeterminate",attrs:{role:"progressbar","aria-valuemax":100,"aria-valuemin":0}})])])},r=[]},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-toolbar",class:t.classes},[n("div",{staticClass:"ui-toolbar__left"},[t.removeNavIcon?t._e():n("div",{staticClass:"ui-toolbar__nav-icon"},[t._t("icon",[n("ui-icon-button",{attrs:{size:"large",type:"secondary",color:t.textColor,icon:t.navIcon},on:{click:t.navIconClick}})])],2),t.brand||t.$slots.brand?n("div",{staticClass:"ui-toolbar__brand"},[t._t("brand",[n("div",{staticClass:"ui-toolbar__brand-text"},[t._v(t._s(t.brand))])])],2):t._e()]),n("div",{staticClass:"ui-toolbar__body",class:{"has-brand-divider":t.hasBrandDivider}},[t._t("default",[t.title?n("div",{staticClass:"ui-toolbar__title"},[t._v(t._s(t.title))]):t._e()])],2),n("div",{staticClass:"ui-toolbar__right"},[t._t("actions")],2),n("ui-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"ui-toolbar__progress",attrs:{color:t.progressColor}})],1)},r=[]},function(t,e){t.exports=kolibriGlobal.coreVue.components.kSelect},function(t,e){t.exports=kolibriGlobal.utils.i18n},function(t,e,n){var i;i=function(t,e){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1}),e.prefix="",e._getPrefixedKey=function(t,e){return(e=e||{}).noPrefix?t:this.prefix+t},e.set=function(t,e,n){var i=this._getPrefixedKey(t,n);try{localStorage.setItem(i,JSON.stringify({data:e}))}catch(n){console&&console.warn("Lockr didn't successfully save the '{"+t+": "+e+"}' pair, because the localStorage is full.")}},e.get=function(t,e,n){var i,r=this._getPrefixedKey(t,n);try{i=JSON.parse(localStorage.getItem(r))}catch(e){try{i=localStorage[r]?JSON.parse('{"data":"'+localStorage.getItem(r)+'"}'):null}catch(e){console&&console.warn("Lockr could not load the item with key "+t)}}return null===i?e:void 0!==i.data?i.data:e},e.sadd=function(t,n,i){var r,s=this._getPrefixedKey(t,i),o=e.smembers(t);if(o.indexOf(n)>-1)return null;try{o.push(n),r=JSON.stringify({data:o}),localStorage.setItem(s,r)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+n+" to "+t+" set, because the localStorage is full.")}},e.smembers=function(t,e){var n,i=this._getPrefixedKey(t,e);try{n=JSON.parse(localStorage.getItem(i))}catch(t){n=null}return null===n?[]:n.data||[]},e.sismember=function(t,n,i){this._getPrefixedKey(t,i);return e.smembers(t).indexOf(n)>-1},e.getAll=function(){return Object.keys(localStorage).map(function(t){return e.get(t)})},e.srem=function(t,n,i){var r,s,o=this._getPrefixedKey(t,i),a=e.smembers(t,n);(s=a.indexOf(n))>-1&&a.splice(s,1),r=JSON.stringify({data:a});try{localStorage.setItem(o,r)}catch(e){console&&console.warn("Lockr couldn't remove the "+n+" from the set "+t)}},e.rm=function(t){localStorage.removeItem(t)},e.flush=function(){localStorage.clear()},e},void 0!==t&&t.exports&&(e=t.exports=i(0,e))},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"signup-page"}},[n("ui-toolbar",{attrs:{type:"colored",textColor:"white"}},[n("template",{slot:"icon"},[n("logo",{staticClass:"app-bar-icon"})],1),n("template",{slot:"brand"},[t._v("\n      "+t._s(t.$tr("kolibri"))+"\n    ")]),n("div",{attrs:{slot:"actions"},slot:"actions"},[n("router-link",{attrs:{id:"signin",to:t.signInPage}},[n("span",[t._v(t._s(t.$tr("logIn")))])])],1)],2),n("form",{ref:"form",staticClass:"signup-form",on:{submit:function(e){return e.preventDefault(),t.signUp(e)}}},[t.unknownError?n("ui-alert",{attrs:{type:"error"},on:{dismiss:t.resetSignUpState}},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e(),n("h1",{staticClass:"signup-title"},[t._v(t._s(t.$tr("createAccount")))]),n("k-textbox",{ref:"name",attrs:{id:"name",type:"text",autocomplete:"name",label:t.$tr("name"),maxlength:120,autofocus:!0,invalid:t.nameIsInvalid,invalidText:t.nameIsInvalidText},on:{blur:function(e){t.nameBlurred=!0}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("k-textbox",{ref:"username",attrs:{id:"username",type:"text",autocomplete:"username",label:t.$tr("username"),maxlength:30,invalid:t.usernameIsInvalid,invalidText:t.usernameIsInvalidText},on:{blur:function(e){t.usernameBlurred=!0},input:t.resetSignUpState},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("k-textbox",{ref:"password",attrs:{id:"password",type:"password",autocomplete:"new-password",label:t.$tr("password"),invalid:t.passwordIsInvalid,invalidText:t.passwordIsInvalidText},on:{blur:function(e){t.passwordBlurred=!0}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("k-textbox",{ref:"confirmedPassword",attrs:{id:"confirmed-password",type:"password",autocomplete:"new-password",label:t.$tr("reEnterPassword"),invalid:t.confirmedPasswordIsInvalid,invalidText:t.confirmedPasswordIsInvalidText},on:{blur:function(e){t.confirmedPasswordBlurred=!0}},model:{value:t.confirmedPassword,callback:function(e){t.confirmedPassword=e},expression:"confirmedPassword"}}),n("k-select",{attrs:{label:t.$tr("facility"),options:t.facilityList,invalid:t.facilityIsInvalid,invalidText:t.facilityIsInvalidText},on:{blur:function(e){t.facilityBlurred=!0}},model:{value:t.selectedFacility,callback:function(e){t.selectedFacility=e},expression:"selectedFacility"}}),n("k-button",{staticClass:"submit",attrs:{disabled:t.busy,primary:!0,text:t.$tr("finish"),type:"submit"}})],1),n("div",{staticClass:"footer"},[n("language-switcher-footer")],1)],1)},r=[]},function(t,e,n){"use strict";var i=n(31),r=n(96),s=n(0);var o=function(t){n(89)},a=Object(s.a)(i.a,r.a,r.b,!1,o,"data-v-5fc6e572",null);e.a=a.exports},function(t,e){},function(t,e){t.exports=kolibriGlobal.coreVue.mixins.responsiveWindow},function(t,e){t.exports=kolibriGlobal.coreVue.components.pointsIcon},function(t,e){t.exports=kolibriGlobal.coreVue.components.permissionsIcon},function(t,e,n){"use strict";var i=n(32),r=n(95),s=n(0);var o=function(t){n(94)},a=Object(s.a)(i.a,r.a,r.b,!1,o,"data-v-52cc1e49",null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("core-modal",{attrs:{title:t.$tr("passwordChangeFormHeader")},on:{cancel:t.closeModal}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[n("k-textbox",{ref:"newPassword",attrs:{type:"new-password",label:t.$tr("newPasswordFieldLabel"),invalid:t.newPasswordIsInvalid,invalidText:t.newPasswordInvalidErrorText,autofocus:!0},on:{blur:function(e){t.newPasswordBlurred=!0}},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),n("k-textbox",{ref:"confirmedNewPassword",attrs:{type:"new-password",label:t.$tr("confirmNewPasswordFieldLabel"),invalid:t.confirmedNewPasswordIsInvalid,invalidText:t.confirmedNewPasswordInvalidErrorText},on:{blur:function(e){t.confirmedNewPasswordBlurred=!0}},model:{value:t.confirmedNewPassword,callback:function(e){t.confirmedNewPassword=e},expression:"confirmedNewPassword"}}),n("div",{staticClass:"core-modal-buttons"},[n("k-button",{attrs:{text:t.$tr("cancelButtonLabel"),primary:!1,appearance:"flat-button"},on:{click:t.closeModal}}),n("k-button",{attrs:{type:"submit",text:t.$tr("updateButtonLabel"),primary:!0,appearance:"raised-button",disabled:t.isBusy}})],1)],1)])},r=[]},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("section",[n("h2",[t._v(t._s(t.$tr("points")))]),n("points-icon",{staticClass:"points-icon",attrs:{active:!0}}),n("span",{staticClass:"points-num"},[t._v(t._s(t.$formatNumber(t.totalPoints)))])],1),n("section",[n("h2",[t._v(t._s(t.$tr("role")))]),t._v("\n    "+t._s(t.role)+"\n  ")]),t.userHasPermissions?n("section",[n("h2",[t._v(t._s(t.$tr("devicePermissions")))]),n("p",[n("permissions-icon",{staticClass:"permissions-icon",attrs:{permissionType:t.permissionType}}),t._v("\n      "+t._s(t.permissionTypeText)+"\n    ")],1),n("p",[t._v("\n      "+t._s(t.$tr("youCan"))+"\n      "),n("ul",{staticClass:"permissions-list"},t._l(t.getUserPermissions,function(e,i){return e?n("li",{key:i},[t._v("\n          "+t._s(t.getPermissionString(i))+"\n        ")]):t._e()}))])]):t._e(),n("form",{on:{submit:function(e){return e.preventDefault(),t.submitEdits(e)}}},[t.success?n("ui-alert",{attrs:{type:"success",dismissible:!1}},[t._v("\n      "+t._s(t.$tr("success"))+"\n    ")]):t._e(),t.unknownError?n("ui-alert",{attrs:{type:"error",dismissible:!1}},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e(),t.canEditName?n("k-textbox",{ref:"name",attrs:{type:"text",autocomplete:"name",autofocus:!1,label:t.$tr("name"),disabled:t.busy,maxlength:120,invalid:t.nameIsInvalid,invalidText:t.nameIsInvalidText},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):[n("h2",[t._v(t._s(t.$tr("name")))]),n("p",[t._v(t._s(t.name))])],t.canEditUsername?n("k-textbox",{ref:"username",attrs:{type:"text",autocomplete:"username",label:t.$tr("username"),disabled:t.busy,maxlength:30,invalid:t.usernameIsInvalid,invalidText:t.usernameIsInvalidText},on:{blur:function(e){t.usernameBlurred=!0},input:t.resetProfileState},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}):[n("h2",[t._v(t._s(t.$tr("username")))]),n("p",[t._v(t._s(t.session.username))])],t.canEditUsername||t.canEditName?n("k-button",{staticClass:"submit",attrs:{type:"submit",text:t.$tr("updateProfile"),primary:!0,disabled:t.busy}}):t._e()],2),t.canEditPassword?n("k-button",{staticClass:"change-password",attrs:{appearance:"basic-link",text:t.$tr("changePasswordPrompt"),disabled:t.busy},on:{click:function(e){t.setPasswordModalVisible(!0)}}}):t._e(),t.passwordModalVisible?n("change-user-password-modal",{on:{cancel:function(e){t.setPasswordModalVisible(!1)}}}):t._e()],1)},r=[]},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("core-base",{attrs:{navBarNeeded:t.navBarNeeded,topLevelPageName:t.topLevelPageName,appBarTitle:t.appBarTitle}},[t.navBarNeeded?n(t.currentPage,{tag:"component"}):t._e()],1),t.navBarNeeded?t._e():n("div",{staticClass:"full-page"},[n(t.currentPage,{tag:"component"})],1)],1)},r=[]},function(t,e,n){"use strict";e.a={pageName:void 0,pageState:{},facilityId:void 0}},function(t,e,n){"use strict";e.a={SET_PAGE_NAME:function(t,e){t.pageName=e},SET_PAGE_STATE:function(t,e){t.pageState=e},SET_FACILITY_ID:function(t,e){t.facilityId=e},SET_PROFILE_BUSY:function(t,e){t.pageState.busy=e},SET_PROFILE_SUCCESS:function(t,e){t.pageState.success=e},SET_PROFILE_ERROR:function(t,e){var n=e.isError,i=e.errorMessage;void 0===i&&(i="");var r=e.errorCode;void 0===r&&(r=null),t.pageState.error=n,t.pageState.errorMessage=i,t.pageState.errorCode=r},SET_PROFILE_PASSWORD_MODAL:function(t,e){t.pageState.passwordState.modal=e},SET_PROFILE_PASSWORD_ERROR:function(t,e){var n=e.isError,i=e.errorMessage;void 0===i&&(i=""),t.pageState.passwordState.error=n,t.pageState.passwordState.errorMessage=i},SET_SIGN_UP_BUSY:function(t,e){t.pageState.busy=e},SET_SIGN_UP_ERROR:function(t,e){var n=e.errorCode,i=e.errorMessage;void 0===i&&(i=""),t.pageState.errorCode=n,t.pageState.errorMessage=i},RESET_PROFILE_STATE:function(t){t.pageState={busy:!1,success:!1,error:!1,errorCode:null,errorMessage:"",passwordState:{modal:!1,success:!1,error:!1}}},RESET_SIGN_UP_STATE:function(t){t.pageState={busy:!1,errorCode:null,errorMessage:""}}}},function(t,e,n){"use strict";var i=n(3),r=(n.n(i),n(10)),s=n.n(r),o=n(101),a=n.n(o),u=n(9),c=n.n(u),l=n(102),d=n.n(l),f=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={routes:{configurable:!0},mutations:{configurable:!0},initialState:{configurable:!0},RootVue:{configurable:!0},store:{configurable:!0},stateSetters:{configurable:!0}};return n.routes.get=function(){return[]},n.mutations.get=function(){return{}},n.initialState.get=function(){return{}},n.RootVue.get=function(){return{}},n.store.get=function(){return c.a},n.stateSetters.get=function(){return[]},e.prototype.ready=function(){var t=this;this.store.registerModule({state:this.initialState,mutations:this.mutations}),Object(i.getCurrentSession)(c.a).then(function(){Promise.all([].concat(t.stateSetters.map(function(e){return e(t.store)}))).then(function(){d.a.start(),t.rootvue=new a.a(Object.assign({el:"rootvue",store:c.a,router:s.a.init(t.routes)},t.RootVue))})})},Object.defineProperties(e.prototype,n),e}(n(103).a);e.a=f},function(t,e){t.exports=kolibriGlobal.lib.vue},function(t,e){t.exports=kolibriGlobal.heartbeat},function(t,e,n){"use strict";var i=n(104),r=n.n(i),s=function(t){for(var e,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];this.name="user_module",this.events={},this.once={};var r={};this.kolibriModuleOptions.forEach(function(e){t[e]&&(r[e]=t[e])}),Object.assign(this,r),(e=this).initialize.apply(e,[t].concat(n)),this._registerKolibriModule()},o={kolibriModuleOptions:{configurable:!0},Kolibri:{configurable:!0}};o.kolibriModuleOptions.get=function(){return[]},s.prototype._registerKolibriModule=function(){r.a.registerKolibriModuleSync(this)},s.prototype.initialize=function(){},s.prototype.ready=function(){},s.prototype.stopListening=function(t,e){r.a.stopListening(t,this,e)},s.prototype.emit=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];r.a.emit.apply(r.a,t)},o.Kolibri.get=function(){return r.a},Object.defineProperties(s.prototype,o),e.a=s},function(t,e){t.exports=kolibriGlobal}]);